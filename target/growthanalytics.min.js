var GrowthAnalyticsModule;!function(a){var b=function(){function a(){}return a.get=function(a){if(!document.cookie)return null;var b=document.cookie.split("; ");for(var c in b){var d=b[c].split("=");if(d[0]==a)return decodeURIComponent(d[1])}return null},a.set=function(a,b,c){var d=a+"="+encodeURIComponent(b);d+="; path=/",d+="; expires="+new Date((new Date).getTime()+c).toUTCString(),document.cookie=d},a["delete"]=function(a){document.cookie=a+"=; path=/; expires="+new Date(0).toUTCString()},a}();a.CookieUtils=b}(GrowthAnalyticsModule||(GrowthAnalyticsModule={}));var GrowthAnalyticsModule;!function(a){var b=function(){function a(){}return a.parseUrl=function(a){var b=a.match(/^(([^:\/?#]+):\/\/)?([^:\/?#]+)(:([0-9]+))?\/?/);return{scheme:b[2]?b[2]:void 0,domain:b[3]?b[3]:void 0,port:b[5]?parseInt(b[5]):void 0}},a}();a.HttpUtils=b}(GrowthAnalyticsModule||(GrowthAnalyticsModule={}));var GrowthAnalyticsModule;!function(a){var b=function(){function a(){}return a.compile=function(a){return function(b){var c=a;for(var d in b)c=c.replace(new RegExp("\\{"+d+"\\}","gm"),b[d]);return c}},a}();a.Template=b}(GrowthAnalyticsModule||(GrowthAnalyticsModule={}));var GrowthAnalyticsModule;!function(a){var b=function(){function b(){this.opened=!1,this.template=a.Template.compile('<iframe id="growthanalyticsSegmentView" src="{baseUrl}segments/external?credentialId={credentialId}&applicationId={applicationId}&targetOrigin={origin}" allowtransparency="true" style="width: 898px; min-height: 529px; border-style: none; position: fixed; top: 0px; padding: 0px; margin: 0px; z-index: 100000;"></iframe><div style="width: 100%; height: {height}px;"></div>')}return b.prototype.show=function(b,c){var d=this;this.element=document.createElement("div"),this.element.innerHTML=this.template({baseUrl:GrowthAnalytics.options.baseUrl,credentialId:GrowthAnalytics.options.credentialId,applicationId:GrowthAnalytics.options.applicationId,origin:encodeURIComponent(GrowthAnalytics.options.callerUrl),height:encodeURIComponent(GrowthAnalytics.options.headerHeight.toString()),backgroundColor:encodeURIComponent(GrowthAnalytics.options.backgroundColor)}),this.iframeElement=this.element.getElementsByTagName("iframe")[0],window.addEventListener("message",function(b){var e=a.HttpUtils.parseUrl(b.origin).domain,f=a.HttpUtils.parseUrl(GrowthAnalytics.options.baseUrl).domain;if(e==f&&b.source==d.iframeElement.contentWindow){var g=JSON.parse(b.data);switch(g.type){case"open":d.opened=!0;break;case"close":d.opened=!1,c()}d.rerender()}},!1),window.addEventListener("resize",function(a){d.rerender()},!1),b.appendChild(this.element)},b.prototype.rerender=function(){this.iframeElement.style.height=(this.opened?window.innerHeight:GrowthAnalytics.options.headerHeight)+"px"},b}();a.SegmentView=b}(GrowthAnalyticsModule||(GrowthAnalyticsModule={}));var GrowthAnalyticsModule;!function(a){var b=function(){function b(){}return b.request=function(b,c,d,e,f){var g=document.createElement("div");g.innerHTML=this.template({method:b,url:c,target:"growthAnalyticsXdmView"+Math.round(1e8*Math.random())});var h=g.getElementsByTagName("form")[0];for(var i in d){var j=document.createElement("input");j.type="hidden",j.name=i,j.value=d[i],h.appendChild(j)}var k=g.getElementsByTagName("iframe")[0];window.addEventListener("message",function(b){var c=a.HttpUtils.parseUrl(b.origin).domain,d=a.HttpUtils.parseUrl(GrowthAnalytics.options.baseUrl).domain;c==d&&b.source==k.contentWindow&&(e(b.data),f.removeChild(g))},!1),f.appendChild(g),h.submit()},b.template=a.Template.compile('<form method="{method}" action="{url}" target="{target}"></form><iframe id="growthAnalyticsXdmView" name="{target}" style="position: absolute; top: -10000px; height: 0px; width: 0px;"></iframe>'),b}();a.Xdm=b}(GrowthAnalyticsModule||(GrowthAnalyticsModule={}));var GrowthAnalytics=function(){function a(){}return a.init=function(a){for(var b in a)this.options[b]=a[b];this.growthbeatElement=document.getElementById(this.options.rootElementId),null==this.growthbeatElement&&(this.growthbeatElement=document.createElement("div"),this.growthbeatElement.id=this.options.rootElementId,document.body.insertBefore(this.growthbeatElement,document.body.childNodes[0]))},a.showSegment=function(a){(new GrowthAnalyticsModule.SegmentView).show(this.growthbeatElement,a)},a.redirectToLogin=function(){location.href=this.options.baseUrl+"login?applicationId="+this.options.applicationId},a.redirectToConnect=function(){location.href=this.options.baseUrl+"services/"+this.options.applicationId},a.options={applicationId:void 0,credentialId:void 0,callerUrl:location.hostname,baseUrl:"https://analytics.growthbeat.com/",apiUrl:"https://api.analytics.growthbeat.com/",headerHeight:68,rootElementId:"growthbeat",sessionIdCookieName:"growthbeat.sessionId",cookieDuration:6048e5,backgroundColor:"#333549"},a}();